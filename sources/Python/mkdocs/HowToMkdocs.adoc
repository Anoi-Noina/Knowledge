= MkDocsの使い方 - 環境構築と設定

このドキュメントでは、MkDocsを使ったドキュメントサイト構築手順を説明します。

== 前提

* Pythonがインストールされていること。

== 手順

=== プロジェクトディレクトリの作成

[source, bash]
----
# 仮想環境の作成 (推奨)
python -m venv .venv
source .venv/bin/activate  # Windowsの場合は .venv\Scripts\activate

# 必要なライブラリとテーマの一括インストール
# mkdocs本体、Materialテーマ、Windmillテーマ、GitBookテーマを導入
pip install mkdocs mkdocs-material mkdocs-windmill mkdocs-gitbook

# プロジェクトフォルダの作成と移動 (現在のディレクトリを汚染しないように)
mkdocs new my-docs-project
cd my-docs-project
----

=== MkDocs設定ファイル (mkdocs.yml)

mkdocsの全体設定はyamlファイルで作成します。

[source, yml]
----
# サイトの基本情報
site_name: My Awesome Project Docs  # サイトタイトル（ブラウザのタブやヘッダーに表示）
site_url: https://example.com/     # 任意: サイトの公開URL

# Materialテーマの有効化
theme:
    name: material
    
    # windmillだとmermaidが表示されない
    # name: windmill
    
    # 言語を日本語に設定（サイト内の日付や検索などのUIが日本語になります）
    language: ja

# cssの適用
extra_css:
  - assets/stylesheets/custom.css

# ナビゲーション（目次）の定義
nav:
    - ホーム: index.md             # docs/index.md に対応
    - 使い方ガイド:                 # トップレベルの見出し (親)
        - はじめる: sample_dir/test.md


markdown_extensions:
  # コードブロックの拡張機能（ネスト対応やカスタム処理を可能にする）
  - pymdownx.superfences:
      # カスタムコードブロック (フェンス) の定義
      custom_fences:
        # Mermaid図のレンダリング設定
        - name: mermaid
          class: mermaid
          # Mermaidの定義コードをそのままHTMLに出力するためのフォーマット指定
          format: !!python/name:pymdownx.superfences.fence_code_format

plugins:
  # プラグインの有効化
  - search:
      # 検索機能の言語設定を日本語に
      lang: ja

----

=== 起動と確認

ドキュメントの編集・確認はローカルサーバーで行います。

[source, bash]
----
# ローカルサーバーの起動とブラウザでの確認 (Ctrl+Cで停止)
mkdocs serve
----

=== ビルドと公開準備

最終的な公開用ファイルを生成します。このコマンドを実行すると、プロジェクトルートに「site」フォルダが作成され、その中に静的HTMLファイル群が格納されます。

[source, bash]
----
# 静的サイトのビルド
mkdocs build
----



== 追加対応


=== marpを埋め込む場合

[source, bash]
----
# Node.js環境の初期化
npm init -y

# Marp CLIのインストール
npm install @marp-team/marp-cli

# 変換先のディレクトリを作成
mkdir -p docs/slides

# Marp CLI を使ってスライド (your_slides.md) を HTML に変換する
npx @marp-team/marp-cli your_slides.md -o docs/slides/your_slides.html --html

----

marpで作ったslideをマークダウンへiframeを使って埋め込む

[source, md]
----
# Marpスライドの表示

<div class="marp-container">
  // srcのパスに注意すること
  <iframe 
    src="../slides/your_slides.html" 
    frameborder="0" 
    allowfullscreen="true" 
    class="marp-iframe"
    loading="lazy"
  ></iframe>
</div>
----